<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cannon Blast</title>
</head>
<script>
    //principali:
    //TODO: quando finisce la partita il contatore scompare
    //TODO: decidere se fare impostazioni che fermano il gioco (rischioso) in caso sostituire l'ingranaggio con il tasto per azzerare il volume
    //TODO: modificare la velocità della palla in base al livello e con il tempo in endless mode
    //TODO: modificare il tempo a disposizione per completare il livello in base al livello selezionato
    //TODO: creare sistema aggiunta monete e gemme per kill e in base al livello completato nella mode a livelli oppure in base al tempo rimasto, oppure fare i livelli con le vite e dare gemme in base alle vite rimanenti
    //FIXME: ottimizzare il controllo delle collisioni in modo da fare meno controlli(Spatial Partitioning)
    //FIXME: se stai fermo alcune volte le palle non spawnano(probabilmente fixato)
    //BUG: fixare le scritte delle palle che si sovrappongono tra di loro (magari facendo un random che alla generazione delle scritte insierisce zindex alle palle e scritte di 1/2 o 3/4)

    //efficienza modifica programma:
    //TODO: se ci sono alcuni oggetti con classi e proprietà attribuite da javascript, mettere le proprietà su css
    //TODO: fare cose con le classi e id per rendere tutto più pulito
    //TODO: sistemare l'interfaccia e mettere le cose dove devono stare
    //TODO: forse cancellare il div iniziale in quanto uguale al body
    //TODO: sostituire i bottoni immagini con dei button per poterli premere con tab

    //estetica:
    //TODO: abbellire schermata sconfitta
    //TODO: fare uno sfondo
    //TODO: fare una animazione di scomparsa del menu per renderlo più carino

    //opzionali:
    //TODO: barra di riempimento di fine livello
    //TODO: modalità con rimbalzi random
    //TODO: migliorare fisica palle facendo sembrare che rimbalzino
    //TODO: migliorare fisica delle palle impostando un'altezza a cui tornano giù
    //TODO: se sei in una sezione non permettere di ricliccare sulla sezione



    //A ogni livello deve aumentare la vita delle palle, e il massimo di palle su schermo
    //In Endless mode la vita e il massimo di palle su schermo delle palle aumenta con il tempo
    "use strict";
    let padre;
    let barraSuperiore;
    function onload() {
        padre = document.getElementsByTagName("body")[0]//.querySelector("div");
        barraSuperiore = document.getElementById("barra");
        document.addEventListener("keydown", tastoPremuto);
        document.addEventListener("keyup", tastoRilasciato);
        // contatore.className= "barraInformazioni";
        // contenitoreMonete.className= "barraInformazioni";
        // contenitoreGemme.className= "barraInformazioni";
        // impostazioni.className= "barraInformazioni";
        // barraSuperiore.appendChild(contatore);
        // barraSuperiore.appendChild(contenitoreMonete);
        // barraSuperiore.appendChild(contenitoreGemme);
        // barraSuperiore.appendChild(impostazioni);
    }
    let dimensioniCannoneWidth = 200;
    let dimensioniCannoneHeight = 200;
    let dimensioniPalleWidth = 200;
    let dimensioniPalleHeight = 200;
    let dimensioniProiettiliWidth = 200;
    let dimensioniProiettiliHeight = 200;
    let listaPalle = [];
    let listaProiettili = [];
    let listaGrafichePalle = ["Palla1.png", "Palla2.png", "Palla3.png", "Palla4.png"];
    let timerCreaPalle;
    let timerMuoviPP;
    let timerSvuotaProiettili;
    let timerGemme;
    let passo = 100; //minimo:20 | massimo: 150 
    let cannone;
    let danno = 5; //minimo: 5 | massimo: decidere in base alla vita massima
    let controllaCollisioni = false;
    let morte = false;
    let schermataGioco;
    let monete = 0;
    let moneteDurantePartita = 0;
    let gemme = 0;
    let gemmeDurantePartita = 0;
    let timerCannoneSinistra;
    let timerCannoneDestra;
    let timerCannoneSpara;
    let vitaPalle = 500; //cambia
    let massimoPalle = 5; //cambia
    let timerAumentoDifficolta;
    let timerDurataPartita;
    let countDown;

    let modalita;
    // let listaBarra = [];
    // listaBarra.length=8;
    // console.log(listaBarra);
    function cambioSezione() {
        while (padre.querySelector("*:not(.menu):not(.barra)")) {
            console.log(padre.querySelector("*:not(.menu):not(.barra)"));
            padre.removeChild(padre.querySelector("*:not(.menu):not(.barra)"));

        }
    }
    //sezione endless non presente perchè integrata in livello selezionato
    function sezioneLivelli() {
        cambioSezione();
        let centraLivelli = document.createElement("div");
        let livello1 = document.createElement("div");
        let livello2 = document.createElement("div");
        let livello3 = document.createElement("div");
        let livello4 = document.createElement("div");
        centraLivelli.id = "centraLivelli";
        livello1.id = "livello1";
        livello2.id = "livello2";
        livello3.id = "livello3";
        livello4.id = "livello4";
        livello1.addEventListener("click", livelloSelezionato);
        livello2.addEventListener("click", livelloSelezionato);
        livello3.addEventListener("click", livelloSelezionato);
        livello4.addEventListener("click", livelloSelezionato);
        padre.appendChild(centraLivelli);
        centraLivelli.appendChild(livello1);
        centraLivelli.appendChild(livello2);
        centraLivelli.appendChild(livello3);
        centraLivelli.appendChild(livello4);
        livello1.innerText = "1";
        livello2.innerText = "2";
        livello3.innerText = "3";
        livello4.innerText = "4";
        //seleziona i livelli e quando seleziona uno dei livelli compare schermata gioco
        // creaSchermata();
        // schermataGioco.innerHTML = "<h2>Endless Mode</h2> <span><p>Record: 531408 palle distrutte/tempo sopravvissuto <button>Gioca</button>";
        //     schermataGioco.querySelector("button").addEventListener("click", startPartita); //mhh me puzza
    }
    function sezioneNegozio() {
        cambioSezione();
    }
    function sezioneGuardaroba() {
        cambioSezione();
    }
    function sezioneImpostazioni() {
        cambioSezione();
    }
    function creaSchermata() {
        schermataGioco = document.createElement("div");
        schermataGioco.style.textAlign = "center";
        schermataGioco.style.position = "fixed";
        schermataGioco.style.zIndex = 3;
        schermataGioco.style.marginTop = 10 + "vh";
        schermataGioco.style.marginLeft = 25 + "vw";
        schermataGioco.style.height = 50 + "vh";
        schermataGioco.style.width = 50 + "vw";
        padre.appendChild(schermataGioco);
    }
    function livelloSelezionato(event) {
        console.log(event.target);
        console.log(event.target.innerText == "riprova");
        console.log(document.getElementById("endless") == event.target || (modalita == "endless" && event.target.innerText == "riprova"));
        if (document.getElementById("endless") == event.target || (modalita == "endless" && event.target.innerText == "riprova")) {
            massimoPalle = 3;
            vitaPalle = 200;
            countDown = 0;
            if (document.getElementById("endless") == event.target) {
                modalita = "";
            }
            if (modalita != "endless") {
                cambioSezione();//forse meglio non metterlo
                creaSchermata();
                schermataGioco.innerHTML = "<h2>Endless Mode</h2> <p>Record: 531408 palle distrutte/tempo sopravvissuto <button>Gioca</button>";
                schermataGioco.querySelector("button").addEventListener("click", startPartita)//mhh me puzza
            } else {
                startPartita();
                barraSuperiore.querySelector("div").innerText = countDown;
            }
            modalita = "endless";
            console.log("difficoltà endless");
        } else {
            if (document.getElementById("livello1") == event.target || (modalita == "livello1" && event.target.innerText == "riprova")) {
                massimoPalle = 3;
                vitaPalle = 200;
                countDown = 10;
                if (document.getElementById("livello1") == event.target) {
                    modalita = "";
                }
                if (modalita != "livello1") {
                    cambioSezione();//forse meglio non metterlo
                    creaSchermata();
                    schermataGioco.innerHTML = "<h2>Livello 1</h2> <p>Record: 5318 record tempo<button>Gioca</button><button>Indietro</button>";
                    schermataGioco.querySelectorAll("button")[0].addEventListener("click", startPartita);
                    schermataGioco.querySelectorAll("button")[1].addEventListener("click", sezioneLivelli);//mhh me puzza
                } else {
                    startPartita();
                    barraSuperiore.querySelector("div").innerText = countDown;
                }
                modalita = "livello1";
                console.log("difficoltà 1");
            } else {
                if (document.getElementById("livello2") == event.target || (modalita == "livello2" && event.target.innerText == "riprova")) {
                    massimoPalle = 5;
                    vitaPalle = 500;
                    countDown = 10;
                    if (document.getElementById("livello2") == event.target) {
                        modalita = "";
                    }
                    if (modalita != "livello2") {
                        cambioSezione();//forse meglio non metterlo
                        creaSchermata();
                        schermataGioco.innerHTML = "<h2>Livello 2</h2> <p>Record: 5318 record tempo<button>Gioca</button><button>Indietro</button>";
                        schermataGioco.querySelectorAll("button")[0].addEventListener("click", startPartita);
                        schermataGioco.querySelectorAll("button")[1].addEventListener("click", sezioneLivelli);//mhh me puzza
                    } else {
                        startPartita();
                        barraSuperiore.querySelector("div").innerText = countDown;
                    }
                    modalita = "livello2";
                    console.log("difficoltà 2");
                } else {
                    if (document.getElementById("livello3") == event.target || (modalita == "livello3" && event.target.innerText == "riprova")) {
                        massimoPalle = 7;
                        vitaPalle = 1000;
                        countDown = 10;
                        if (document.getElementById("livello3") == event.target) {
                            modalita = "";
                        }
                        if (modalita != "livello3") {
                            cambioSezione();//forse meglio non metterlo
                            creaSchermata();
                            schermataGioco.innerHTML = "<h2>Livello 3</h2> <p>Record: 5318 record tempo<button>Gioca</button><button>Indietro</button>";
                            schermataGioco.querySelectorAll("button")[0].addEventListener("click", startPartita);
                            schermataGioco.querySelectorAll("button")[1].addEventListener("click", sezioneLivelli);//mhh me puzza
                        } else {
                            startPartita();
                            barraSuperiore.querySelector("div").innerText = countDown;
                        }
                        modalita = "livello3";
                        console.log("difficoltà 3");
                    } else {
                        if (document.getElementById("livello4") == event.target || (modalita == "livello4" && event.target.innerText == "riprova")) {
                            massimoPalle = 10;
                            vitaPalle = 2000;
                            countDown = 10;
                            if (document.getElementById("livello4") == event.target) {
                                modalita = "";
                            }
                            if (modalita != "livello4") {
                                cambioSezione();//forse meglio non metterlo
                                creaSchermata();
                                schermataGioco.innerHTML = "<h2>Livello 4</h2> <p>Record: 5318 record tempo<button>Gioca</button><button>Indietro</button>";
                                schermataGioco.querySelectorAll("button")[0].addEventListener("click", startPartita);
                                schermataGioco.querySelectorAll("button")[1].addEventListener("click", sezioneLivelli);//mhh me puzza
                            } else {
                                startPartita();
                                barraSuperiore.querySelector("div").innerText = countDown;
                            }
                            modalita = "livello4";
                            console.log("difficoltà 4");
                        }
                    }
                }
            }
        }
    }
    function startPartita(event) {
        cambioSezione();
        morte = false;
        console.log(padre.querySelector("nav"));
        padre.querySelector("nav").style.display = "none";
        barraSuperiore.querySelector("div").innerText = countDown;
        if (modalita == "endless") {
            timerAumentoDifficolta = window.setInterval(aumentaDifficolta, 20000);//serve solo nella modalità endless
            timerDurataPartita = window.setInterval(function () {//serve solo nella modalità a livelli
                countDown++;
                barraSuperiore.querySelector("div").innerText = countDown;
            }, 1000);
        } else {
            timerDurataPartita = window.setInterval(function () {//serve solo nella modalità a livelli
                countDown--;
                barraSuperiore.querySelector("div").innerText = countDown;
                if (countDown == 0) {
                    morte = true;
                    sconfitta();
                }
            }, 1000);
        }
        timerGemme = window.setInterval(function () { gemmeDurantePartita++ }, 10000);
        timerCreaPalle = window.setInterval(creaPalle, 3000);
        timerMuoviPP = window.setInterval(muoviPP, 1);
        //scrivere personalizzazione
        creaCannone();
        padre.appendChild(cannone.corpo);
    }
    function aumentaDifficolta() {
        massimoPalle += 1;
        vitaPalle += 200;
    }
    function creaCannone() {
        let corpoCannone = document.createElement("img"); //crea il cannone
        corpoCannone.src = "Cannone1.png";
        cannone = { x: window.innerWidth / 2 - dimensioniCannoneWidth / 2, y: window.innerHeight - dimensioniCannoneHeight, corpo: corpoCannone };
        cannone.corpo.style.left = cannone.x + "px";
        cannone.corpo.style.top = cannone.y + "px";
    }
    //creare oggetto palla che ha boolean delle direzioni, le coordinate, la propria immagine e quantità di vita
    function muoviPP() {
        //muovi Palle
        for (let i = 0; i < listaPalle.length; i++) {
            //muove la x(destra e sinistra) delle palle
            if (listaPalle[i].destra) {
                listaPalle[i].x++;
            } else {
                listaPalle[i].x--;
            }
            if (listaPalle[i].x + dimensioniPalleWidth >= window.innerWidth || listaPalle[i].x <= 0) {
                listaPalle[i].destra = !listaPalle[i].destra;
            }
            //muove la y(su e giu) delle palle
            if (listaPalle[i].su) {
                listaPalle[i].y--;
            } else {
                listaPalle[i].y++;
            }
            if (listaPalle[i].y + dimensioniPalleHeight >= window.innerHeight || listaPalle[i].y <= 0) {
                listaPalle[i].su = !listaPalle[i].su;
            }
            // aggiunge i valori modificati negli oggetti alle proprietà css delle immagini
            listaPalle[i].corpo.style.left = listaPalle[i].x + "px";
            listaPalle[i].scritta.style.left = listaPalle[i].x + "px";
            listaPalle[i].corpo.style.top = listaPalle[i].y + "px";
            listaPalle[i].scritta.style.top = listaPalle[i].y + "px";

            collisioniPallaCannone();

            if (controllaCollisioni) {
                collisioniProiettilePalla();
            }

            // console.log(listaPalle[i].destra);
            // console.log(listaPalle[i].x);
            // console.log(listaPalle[i].su);
            // console.log(listaPalle[i].y);

        }
        //Muovi Proiettili
        for (let i = 0; i < listaProiettili.length; i++) {
            listaProiettili[i].y -= 50;
            listaProiettili[i].corpo.style.top = listaProiettili[i].y + "px";
            if (listaProiettili[i].y < -dimensioniProiettiliHeight) {
                padre.removeChild(listaProiettili[i].corpo);
                listaProiettili.splice(i, 1);
                i--;
            }
        }
    }
    function creaPalle() {
        if (listaPalle.length < massimoPalle) {
            let palla = {
                destra: Math.random() > 0.5 ? true : false,
                su: false, //se la palla deve cadere oppure se rimbalza in su 
                y: 0, //all'inizio è uguale a yMax
                yMax: 0, //fissa oppure che cambia ogni volta ma non cambia in game, massima altezza rimbalzo
                immagine: listaGrafichePalle[Math.floor(Math.random() * 4)],
                vita: vitaPalle,
                corpo: document.createElement("img"),
                scritta: document.createElement("p")
            }
            //elementi che dipendono da altri vanno creati dopo
            palla.x = palla.destra ? 0 : window.innerWidth - dimensioniPalleWidth, //o tutto sinistra o tutto destra, dipende dalla proprietà destra all'inizio
                palla.corpo.style.left = palla.x + "px";
            palla.scritta.style.left = palla.x + "px";
            // console.log(Math.random()>0.5 ? true : false);
            palla.corpo.src = palla.immagine;
            palla.scritta.style.zIndex = 2;
            palla.scritta.style.height = dimensioniPalleHeight / 2 + "px";
            palla.scritta.style.width = dimensioniPalleWidth + "px";
            palla.scritta.style.paddingTop = dimensioniPalleHeight / 4 + "px";
            palla.scritta.className = "vita";
            listaPalle.push(palla);
            padre.appendChild(palla.corpo);
            palla.scritta.innerText = palla.vita;
            padre.appendChild(palla.scritta);
            // window.clearInterval(timerCreaPalle);
            // window.clearInterval(timerMuoviPalle);
        }
    }
    function creaProiettile() {
        if (!morte) {
            let proiettile = { y: cannone.y - dimensioniProiettiliHeight, x: cannone.x, corpo: document.createElement("img") };
            proiettile.corpo.src = "Proiettile.png";
            listaProiettili.push(proiettile);
            proiettile.corpo.style.top = proiettile.y + "px";
            proiettile.corpo.style.left = proiettile.x + "px";
            padre.appendChild(proiettile.corpo);
        }
    }
    function tastoPremuto(event) {
        if (!morte) {
            if (event.key === "ArrowLeft" || event.key === "A" || event.key === "a") {
                console.log(timerCannoneSinistra);
                if (!timerCannoneSinistra) {
                    if (timerCannoneDestra) {
                        window.clearInterval(timerCannoneDestra);
                        timerCannoneDestra = undefined;
                    }
                    timerCannoneSinistra = window.setInterval(function () {
                        if (cannone.x - passo >= 0) {
                            cannone.x -= passo;
                            cannone.corpo.style.left = cannone.x + "px";
                        }
                    }, 50);
                }
                console.log(event.key);
            }
            if (event.key === "ArrowRight" || event.key === "D" || event.key === "d") {
                if (!timerCannoneDestra) {
                    if (timerCannoneSinistra) {
                        window.clearInterval(timerCannoneSinistra);
                        timerCannoneSinistra = undefined;
                    }
                    timerCannoneDestra = window.setInterval(function () {
                        if (cannone.x + passo <= window.innerWidth - dimensioniCannoneWidth) {
                            cannone.x += passo;
                            cannone.corpo.style.left = cannone.x + "px";
                        }
                    }, 50);
                }
                console.log(event.key);
            }
            if (event.key === "ArrowUp" || event.key === "W" || event.key === "w") {
                if (!timerCannoneSpara) {
                    timerCannoneSpara = window.setInterval(function () {
                        creaProiettile();
                        controllaCollisioni = true
                    }, 50);
                }
                console.log(event.key);
            }
        }
        if(event.key === " "){
            if(barraSuperiore.style.display == "flex"){
                barraSuperiore.style.display = "none";
            } else {
                barraSuperiore.style.display = "flex";
            }
        }
    }
    function tastoRilasciato(event) {
        if (event.key === "ArrowLeft" || event.key === "A" || event.key === "a") {
            window.clearInterval(timerCannoneSinistra);
            timerCannoneSinistra = undefined;
            console.log(event.key);
        }
        if (event.key === "ArrowRight" || event.key === "D" || event.key === "d") {
            window.clearInterval(timerCannoneDestra);
            timerCannoneDestra = undefined;
            console.log(event.key);
        }
        if (event.key === "ArrowUp" || event.key === "W" || event.key === "w") {
            timerSvuotaProiettili = window.setInterval(svuotaProiettili, 50);
            window.clearInterval(timerCannoneSpara);
            timerCannoneSpara = undefined;
        }
    }
    function svuotaProiettili() {
        if (listaProiettili.length == 0) {
            window.clearInterval(timerSvuotaProiettili);
            controllaCollisioni = false;
        }
    }
    //cambiare dimensioni immagini con variabili
    function collisioniPallaCannone() {
        for (let i = 0; i < listaPalle.length; i++) {
            if (listaPalle[i].y + dimensioniPalleHeight >= cannone.y + 42) {//42 è l'altezza a cui corrisponde l'inizio del cannone sull'immagine attuale
                if ((listaPalle[i].x >= cannone.x && listaPalle[i].x <= cannone.x + dimensioniCannoneWidth) || (listaPalle[i].x + dimensioniPalleWidth >= cannone.x && listaPalle[i].x + dimensioniPalleWidth <= cannone.x + dimensioniCannoneWidth)) {
                    //hittato 
                    morte = true;
                    sconfitta();

                }
            }
        }
    }
    function sconfitta() {
        window.clearInterval(timerCreaPalle);
        window.clearInterval(timerMuoviPP);
        window.clearInterval(timerSvuotaProiettili);
        window.clearInterval(timerGemme);
        window.clearInterval(timerAumentoDifficolta);
        window.clearInterval(timerDurataPartita);
        // if (morte) { //senza la boolean si crea la schermataSconfitta 2 volte
        //nuovo prova
        for (let i = 0; i < listaPalle.length; i++) {
            padre.removeChild(listaPalle[i].corpo);
            padre.removeChild(listaPalle[i].scritta);
        }
        for (let i = 0; i < listaProiettili.length; i++) {
            padre.removeChild(listaProiettili[i].corpo);
        }
        listaPalle.length = 0;
        listaProiettili.length = 0;
        padre.removeChild(cannone.corpo);
        padre.querySelector("nav").style.display = "";



        schermataSconfitta();
        massimoPalle = 3;
        vitaPalle = 200;
        monete += moneteDurantePartita;
        gemme += gemmeDurantePartita;
        moneteDurantePartita = 0;
        gemmeDurantePartita = 0;
        // }
        // morte = true;
    }
    function schermataSconfitta() {
        creaSchermata();
        schermataGioco.innerHTML = "<h2> Hai perso!</h2> <span><p>monete ottenute: " + moneteDurantePartita + "</p><p>gemme ottenute: " + gemmeDurantePartita + "</p></span> <button>riprova</button>";
        schermataGioco.querySelector("button").addEventListener("click", livelloSelezionato); //mhh me puzza
    }
    function collisioniProiettilePalla() {
        for (let j = 0; j < listaPalle.length; j++) {
            for (let i = 0; i < listaProiettili.length; i++) {
                console.log(((listaProiettili[i].x >= listaPalle[j].x && listaProiettili[i].x <= listaPalle[j].x + dimensioniPalleWidth)
                    ||
                    (listaProiettili[i].x + dimensioniProiettiliWidth >= listaPalle[j].x && listaProiettili[i].x + dimensioniProiettiliWidth <= listaPalle[j].x + dimensioniPalleWidth))
                    &&
                    ((listaProiettili[i].y >= listaPalle[j].y && listaProiettili[i].y <= listaPalle[j].y + dimensioniPalleHeight)
                        ||
                        (listaProiettili[i].y + dimensioniProiettiliHeight >= listaPalle[j].y && listaProiettili[i].y + dimensioniProiettiliHeight <= listaPalle[j].y + dimensioniPalleHeight)));



                if ((listaProiettili[i].x >= listaPalle[j].x && listaProiettili[i].x <= listaPalle[j].x + dimensioniPalleWidth)
                    ||
                    (listaProiettili[i].x + dimensioniProiettiliWidth >= listaPalle[j].x && listaProiettili[i].x + dimensioniProiettiliWidth <= listaPalle[j].x + dimensioniPalleWidth)) {
                    if (
                        ((listaProiettili[i].y >= listaPalle[j].y && listaProiettili[i].y <= listaPalle[j].y + dimensioniPalleHeight)
                            ||
                            (listaProiettili[i].y + dimensioniProiettiliHeight >= listaPalle[j].y && listaProiettili[i].y + dimensioniProiettiliHeight <= listaPalle[j].y + dimensioniPalleHeight))) {
                        //hittato
                        // window.clearInterval(timerMuoviProiettili);
                        // window.clearInterval(timerMuoviPalle);
                        padre.removeChild(listaProiettili[i].corpo);
                        listaProiettili.splice(i, 1);
                        listaPalle[j].vita -= danno;
                        listaPalle[j].scritta.innerText = listaPalle[j].vita;
                        if (listaPalle[j].vita <= 0) {
                            padre.removeChild(listaPalle[j].corpo);
                            padre.removeChild(listaPalle[j].scritta);
                            listaPalle.splice(j, 1);
                            moneteDurantePartita += 5;
                        }
                    }
                }
            }
        }
    }
</script>
<style>
    body {
        background-color: green;
        margin: 0;
        height: 100vh;
        overflow: hidden;
    }

    nav {
        position: fixed;
        bottom: 0;
        height: 20vh;
        width: 100vw;
        background-color: brown;
        display: flex;
    }

    nav img {
        width: 100%;
    }

    body>img {
        position: fixed;
    }

    .vita {
        position: fixed;
        color: blue;
        font-size: 5em;
        text-align: center;
        margin: 0;
        text-shadow: 2px 2px 0 white;
    }

    body>div:not(#centraLivelli):not(.barra) {
        background-color: aqua;
        /* display: inline-block; */
    }

    #centraLivelli {
        display: flex;
        justify-content: space-evenly;
        padding-top: calc(50vh - 100px);
    }

    #livello1 {
        background-color: pink;
        width: 200PX;
        height: 200PX;
        /* position: fixed;
        left: 10vw;
        top: calc(50vh - 100px); */
    }

    #livello2 {
        background-color: purple;
        width: 200PX;
        height: 200PX;
        /* position: fixed;
        left: 30vw;
        top: calc(50vh - 100px); */
    }

    #livello3 {
        background-color: red;
        width: 200PX;
        height: 200PX;
        /* position: fixed;
        left: 50vw;
        top: calc(50vh - 100px); */
    }

    #livello4 {
        background-color: black;
        width: 200PX;
        height: 200PX;
        /* position: fixed;
        left: 70vw;
        top: calc(50vh - 100px); */
    }

    /* #barra {
        display: flex;
        justify-content: space-between;
    } */


    /* #barraSinistra {
        position: absolute;
        left: 0%;
    }

    #barraCentro {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
    }

    .barraDestra {
        position: absolute;
        left: 100%;
    } */
    img.barra{
        height: 100px;
        width: 100px;
    }
    #barra {
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        /* Usa flexbox */
        justify-content: space-between;
        /* Spaziatura tra gli elementi */
        align-items: center;
        /* Allinea gli oggetti verticalmente al centro */
        width: 100%;
        /* Assicurati che il contenitore occupi tutta la larghezza */
    }

    #barraCentro {
        text-align: center;
        font-size: 5em;
        /* Centra il testo nel div */
        flex-grow: 1;
        /* Fai in modo che il centro prenda il massimo spazio possibile */
        /* text-align: center;          Centra il testo nel div */
    }
</style>

<body onload="onload()">
    <div class="barra" id="barra">
        <img class="barra" id="barraSinistra" src="cogwheel.png">
        <div class="barra" id="barraCentro">contatore</div>
        <img class="barra" src="Moneta-da-7E-befunky-lagazzettadiviareggio.it_-1024x576.jpg">
        <img class="barra" src="diamante-rosa.jpg">
    </div>
    <nav class="menu">
        <img class="menu" id="endless" src="Coez.PNG" onclick="livelloSelezionato(event)">
        <img class="menu" src="Coez.PNG" onclick="sezioneLivelli()">
        <img class="menu" src="Coez.PNG" onclick="sezioneNegozio()">
        <img class="menu" src="Coez.PNG" onclick="sezioneGuardaroba()">
        <img class="menu" src="Coez.PNG" onclick="sezioneImpostazioni()">
    </nav>


</body>

</html>